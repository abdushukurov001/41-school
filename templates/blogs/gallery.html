{% block extra_css %}
<style>
  .slideshow-container .demo-container.active .demo {
    opacity: 1; 
  }

  .slideshow-container .mySlides {
    opacity: 1; 
    transition: opacity 0.5s ease;
  }

  .slideshow-container .demo {
    opacity: 1; 
    transition: opacity 0.5s ease; 
  }

  .slideshow-container {
    cursor: pointer;
    position: relative;
    margin: 0 auto;
  }

  .slideshow-container .prev,
.slideshow-container .next {
  position: absolute;
  top: 35%; 
  border-radius: 5px;
  height: 40px;
  width: 30px;
  background-color: rgba(0, 0, 0, 0.5); 
  color: white;
  border: none;
 
  cursor: pointer;
  z-index: 1000; 
}



.slideshow-container .prev {
  left: 25px;
}

.slideshow-container .next {
  right: 25px;
}

  .slideshow-container .caption-container {
    text-align: center;
    background-color: #222;
    padding: 2px 16px;
    color: white;
  }

  .slideshow-container .row {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }


  .imageSlide{
    height: 700px;
  }


  .slideshow-container .column {
    position: relative;
    flex: 1 1 200px;
    max-width: 200px;
    box-sizing: border-box;
  }

  .slideshow-container .demo {
    width: 100%;
    height: auto;
    object-fit: cover; 
  }

  @media (max-width: 768px) {
    .slideshow-container .column {
      flex: 1 1 30%;
    }
    .imageSlide{
      height: 600px;
    }
  }

  @media (max-width: 480px) {
    .slideshow-container .column {
      flex: 1 1 45%; 
    }
    .imageSlide{
      height: 400px;
    }
  }

 
  .demo:hover {
    opacity: 0.4; 
  }

  .demo {
    opacity: 1;
  }

  .hidden {
    display: none;
  }

</style>
{% endblock %}


<div
  class="container slideshow-container"
  id="gallery"
  style="scroll-margin-top: 7rem"
>
  <h2 style="text-align: center; margin-top: 60px">Maktab Rasmlari</h2>

  <div class="images pt-4">
    {% for gallery in reversed_gallery %}
    <div class="mySlides">
      <img
        class="imageSlide shadow"
        src="{{ gallery.gallery.url }}"
        style="width: 100%"
       
      />
      <button class="carousel-control-prev prev" type="button" onclick="plusSlides(-1)">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      
      <button class="carousel-control-next next" type="button" onclick="plusSlides(1)">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    
    </div>

    {% endfor %}
    <div class="caption-container">
      4 - Maktab rasmlari
    </div>

    <div class="row mt-2" id="imageRow">
      {% for gallery in reversed_gallery %}
      <div
        class="column demo-container {% if forloop.counter > 6 %}hidden{% endif %}"
      >
        <img
          class="demo cursor shadow"
          src="{{ gallery.gallery.url }}"
          style="width: 150px; height: 120px"
          onclick="currentSlide({{ forloop.counter }})"
          alt="Gallery Thumbnail"
        />
      </div>
      {% endfor %}
    </div>


    <div style="text-align: center; margin-top: 20px">

      <svg
        id="arrowDown"
        onclick="toggleImages()"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        fill="currentColor"
        viewBox="0 0 512 512"
      >
        <path
          d="M256 294.1L96 134.1c-8.8-8.8-8.8-23.2 0-32s23.2-8.8 32 0L256 230.1l128-128c8.8-8.8 23.2-8.8 32 0s8.8 23.2 0 32L256 294.1z"
        />
      </svg>
      <svg
        id="arrowUp"
        onclick="toggleImages()"
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        fill="currentColor"
        viewBox="0 0 512 512"
        style="display: none"
      >
        <path
          d="M256 217.9L416 377.9c8.8 8.8 8.8 23.2 0 32s-23.2 8.8-32 0L256 281.9l-128 128c-8.8 8.8-23.2 8.8-32 0s-8.8-23.2 0-32L256 217.9z"
        />
      </svg>
    </div>
  </div>
</div>

{% block extra_js %}
<script>
  let slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n) {
    showSlides((slideIndex += n));
  }

  function currentSlide(n) {
    showSlides((slideIndex = n));
  }

  function showSlides(n) {
    let i;
    let slides = document.querySelectorAll('.slideshow-container .mySlides');
    let dots = document.querySelectorAll('.slideshow-container .demo');
    let captionText = document.getElementById('caption');
    if (n > slides.length) {
      slideIndex = 1;
    }
    if (n < 1) {
      slideIndex = slides.length;
    }

    slides.forEach((slide) => (slide.style.display = 'none'));
    dots.forEach(
      (dot) => (dot.className = dot.className.replace(' active', ''))
    );

    slides[slideIndex - 1].style.display = 'block';
    dots[slideIndex - 1].className += ' active';
    captionText.innerHTML = dots[slideIndex - 1].alt;
  }

  function toggleImages() {
    const hiddenImages = document.querySelectorAll(
      '.slideshow-container .demo-container.hidden'
    );
    const arrowDown = document.getElementById('arrowDown');
    const arrowUp = document.getElementById('arrowUp');

    if (hiddenImages.length > 0) {
      hiddenImages.forEach((image) => image.classList.remove('hidden'));
      arrowDown.style.display = 'none';
      arrowUp.style.display = 'inline';
    } else {
      const allImages = document.querySelectorAll(
        '.slideshow-container .demo-container'
      );
      allImages.forEach((image, index) => {
        if (index >= 6) {
          image.classList.add('hidden');
        }
      });
      arrowDown.style.display = 'inline';
      arrowUp.style.display = 'none';
    }
  }
</script>
{% endblock %}


