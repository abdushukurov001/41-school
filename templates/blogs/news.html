<style>
/* Section Styling */
#news {
  padding-top: 140px;
  padding-bottom: 50px;
}

/* Section Title */
.card-title {
  font-weight: bold;
  color: #0056b3;
  text-align: center;
}

/* News Cards */
#news .card {
  border: 1px solid gray;
  border-radius: 15px;
  overflow: hidden;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  background: #ffffff;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 6px 15px rgba(0, 0, 0, 0.15);
}

#news .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

#news .card-img-top {
  height: 200px;
  object-fit: cover;
}

#news .card-body {
  padding: 15px;
}

#news .card-text {
  font-size: 0.9rem;
  color: #6c757d;
  flex-grow: 1;
}

/* Read More Button */
#news .read-more {
  cursor: pointer;
  color: #ffc107;
  text-decoration: underline;
  font-weight: bold;
}

#news .dots {
  color: #6c757d;
}

/* Carousel control buttons moved below */
.carousel-controls-container {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

#news .carousel-control-prev,
#news .carousel-control-next {
  width: 35px;
  height: 35px;
  border-radius: 30%;
  background-color: #6c757d;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 2px solid #ffffff;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

#news .carousel-control-prev-icon,
#news .carousel-control-next-icon {
  filter: invert(1);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  #news .card {
    margin-bottom: 20px;
  }

  #news .carousel-control-prev,
  #news .carousel-control-next {
    width: 40px;
    height: 40px;
  }
}

</style>

<section id="news" class="container mb-5 mt-5" style="scroll-margin-top: 5rem;">
  <h2 class='text-center card-title text-dark mb-5'>Yangiliklar</h2>
  <div id="newsCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for new in news %}
      {% if forloop.counter0|divisibleby:2 %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2">
      {% endif %}
          <div class="col mb-4 d-flex flex-row">
            <div class="card h-100 shadow-sm flex-row align-items-center">
              <div class="card-body d-flex flex-column w-50">
                <h5 class="card-title text-black">{{ new.title|upper }}</h5>
                <p class="card-text">
                  {{ new.news }}<span class="dots">...</span>
                  <span class="more-text d-none">{{ new.news|slice:"100:" }}</span>
                  <span class="read-more">Ko'proq o'qish</span>
                </p>
              </div>
              <img src="{{ new.news_img.url }}" class="card-img-top w-50" alt="Yangilik surati">
            </div>
          </div>
      {% if forloop.counter|divisibleby:2 or forloop.last %}
        </div>
      </div>
      {% endif %}
      {% endfor %}
    </div>
  </div>

  <!-- Carousel control buttons placed below -->
  <div class="carousel-controls-container">
    <button class="carousel-control-prev" type="button" data-bs-target="#newsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#newsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const readMoreLinks = document.querySelectorAll("#news .read-more");
    readMoreLinks.forEach(link => {
      link.addEventListener("click", function () {
        const parent = this.closest(".card-text");
        const dots = parent.querySelector(".dots");
        const moreText = parent.querySelector(".more-text");

        dots.classList.toggle("d-none");
        moreText.classList.toggle("d-none");

        this.textContent = dots.classList.contains("d-none") ? "Yashirish" : "Ko'proq o'qish";
      });
    });
  });
</script>
